<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_144) on Fri Dec 01 02:44:19 EST 2017 -->
<title>LightLocalization</title>
<meta name="date" content="2017-12-01">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LightLocalization";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LightLocalization.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/FallingEdgeUSLocalization.AngleType.html" title="enum in ca.mcgill.ecse211.finalproject.controller"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/Navigation.html" title="class in ca.mcgill.ecse211.finalproject.controller"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/mcgill/ecse211/finalproject/controller/LightLocalization.html" target="_top">Frames</a></li>
<li><a href="LightLocalization.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ca.mcgill.ecse211.finalproject.controller</div>
<h2 title="Class LightLocalization" class="title">Class LightLocalization</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>ca.mcgill.ecse211.finalproject.controller.LightLocalization</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../ca/mcgill/ecse211/finalproject/sensor/LightController.html" title="interface in ca.mcgill.ecse211.finalproject.sensor">LightController</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">LightLocalization</span>
extends java.lang.Object
implements <a href="../../../../../ca/mcgill/ecse211/finalproject/sensor/LightController.html" title="interface in ca.mcgill.ecse211.finalproject.sensor">LightController</a></pre>
<div class="block">LightLocalization class is responsible for localizing the robot through line detection getting the derivative of the light level. <br>
 This allows to flag if a line is passed regardless of the initial light source. <br>
 While spinning, the angles at which the lines are crossed are noted and used to calculate the X, Y, and Theta offset of the robot.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#atApproxOrigin">atApproxOrigin</a></span></code>
<div class="block">Boolean that indicates if robot is at origin or not.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#biggest">biggest</a></span></code>
<div class="block">Variables which hold the highest and smallest derivative of the light value seen.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#correctionEnd">correctionEnd</a></span></code>
<div class="block">Variables that hold the values of the start and end of sensor polling.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#correctionStart">correctionStart</a></span></code>
<div class="block">Variables that hold the values of the start and end of sensor polling.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private float[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#csData">csData</a></span></code>
<div class="block">Array containing data obtained from light sensor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private SampleProvider</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#csSensor">csSensor</a></span></code>
<div class="block">Sample provider of the color sensor used to fetch light sensor's readings.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#currentBrightness">currentBrightness</a></span></code>
<div class="block">Variable which holds the current brightness to calculate the differentiation</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#dbdt">dbdt</a></span></code>
<div class="block">Variable which holds the instantaneous differentiation of the brightness d/dt(brightness)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#dT">dT</a></span></code>
<div class="block">Variable which is the calculated angle offset of the robot.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#endZipLineLocalization">endZipLineLocalization</a></span></code>
<div class="block">Boolean indicating light localization is happening for zipline dismounting.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#lastBrightness">lastBrightness</a></span></code>
<div class="block">Variable which holds the last seen brightness to calculate the differentiation</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private EV3LargeRegulatedMotor</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#leftMotor">leftMotor</a></span></code>
<div class="block">Left and right motor of the robot.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#lineCounter">lineCounter</a></span></code>
<div class="block">Counter that determines number of lines detected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#localizeOnTheMove">localizeOnTheMove</a></span></code>
<div class="block">Boolean indicating whether the robot is localizing between two destination points.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#LOOP_TIME">LOOP_TIME</a></span></code>
<div class="block">Period for which sensor reading must be taken.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../ca/mcgill/ecse211/finalproject/controller/Navigation.html" title="class in ca.mcgill.ecse211.finalproject.controller">Navigation</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#navigation">navigation</a></span></code>
<div class="block">Navigation which contains basic methods of moving our robot.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../ca/mcgill/ecse211/finalproject/odometry/Odometer.html" title="class in ca.mcgill.ecse211.finalproject.odometry">Odometer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#odometer">odometer</a></span></code>
<div class="block">Odometer which keeps track of where the robot is positioned based on wheel movement.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#positionX">positionX</a></span></code>
<div class="block">Variable which is the calculated offset of the robot in X direction.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#positionY">positionY</a></span></code>
<div class="block">Variable which is the calculated offset of the robot in Y direction.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private EV3LargeRegulatedMotor</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#rightMotor">rightMotor</a></span></code>
<div class="block">Left and right motor of the robot.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#saveLineAngles">saveLineAngles</a></span></code>
<div class="block">Buffer that stores angles at which lines are detected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#SENSOR_TO_WHEEL">SENSOR_TO_WHEEL</a></span></code>
<div class="block">Distance to move to origin.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#smallest">smallest</a></span></code>
<div class="block">Variables which hold the highest and smallest derivative of the light value seen.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#thetaX">thetaX</a></span></code>
<div class="block">Variable which is the difference of the angles between the positive X axis and negative X axis.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#thetaY">thetaY</a></span></code>
<div class="block">Variable which is the difference of the angles between the positive Y axis and negative Y axis.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#zipLineLocalization">zipLineLocalization</a></span></code>
<div class="block">Boolean indicating light localization is happening for zipline mounting.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#LightLocalization-ca.mcgill.ecse211.finalproject.controller.Navigation-ca.mcgill.ecse211.finalproject.odometry.Odometer-EV3LargeRegulatedMotor-EV3LargeRegulatedMotor-SampleProvider-float:A-">LightLocalization</a></span>(<a href="../../../../../ca/mcgill/ecse211/finalproject/controller/Navigation.html" title="class in ca.mcgill.ecse211.finalproject.controller">Navigation</a>&nbsp;navigation,
                 <a href="../../../../../ca/mcgill/ecse211/finalproject/odometry/Odometer.html" title="class in ca.mcgill.ecse211.finalproject.odometry">Odometer</a>&nbsp;odo,
                 EV3LargeRegulatedMotor&nbsp;leftMotor,
                 EV3LargeRegulatedMotor&nbsp;rightMotor,
                 SampleProvider&nbsp;csSensor,
                 float[]&nbsp;csData)</code>
<div class="block">Constructor which links the parameters to the class variables.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#calculatePosition--">calculatePosition</a></span>()</code>
<div class="block">Method responsible to calculate positional offset of robot from true position.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#checkLines--">checkLines</a></span>()</code>
<div class="block">Method responsible for robot to rotate and detect lines to be able to calculate the positional offset.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#closestX--">closestX</a></span>()</code>
<div class="block">This method calculates the closest square side multiple along the X axis to the robot</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#closestY--">closestY</a></span>()</code>
<div class="block">This method calculates the closest square side multiple along the Y axis to the robot</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#doLocalization--">doLocalization</a></span>()</code>
<div class="block">Main method which localizes the robot through the line detection algorithm that relies on light intensity
 differentiation.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#goToEstimateOrigin--">goToEstimateOrigin</a></span>()</code>
<div class="block">Method that moves robot to origin to commence light localization to ensure the capture of all four lines.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#lastNValueAdd-double-">lastNValueAdd</a></span>(double&nbsp;value)</code>
<div class="block">So as not to slow down the already slow processor, only the biggest and smallest derivatives are kept in memory.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#pastline--">pastline</a></span>()</code>
<div class="block">Method responsible for performing line detection algorithm.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/LightLocalization.html#readLSData--">readLSData</a></span>()</code>
<div class="block">Retrieves intensity read by light sensor.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="navigation">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>navigation</h4>
<pre>private&nbsp;<a href="../../../../../ca/mcgill/ecse211/finalproject/controller/Navigation.html" title="class in ca.mcgill.ecse211.finalproject.controller">Navigation</a> navigation</pre>
<div class="block">Navigation which contains basic methods of moving our robot.</div>
</li>
</ul>
<a name="odometer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>odometer</h4>
<pre>private&nbsp;<a href="../../../../../ca/mcgill/ecse211/finalproject/odometry/Odometer.html" title="class in ca.mcgill.ecse211.finalproject.odometry">Odometer</a> odometer</pre>
<div class="block">Odometer which keeps track of where the robot is positioned based on wheel movement.</div>
</li>
</ul>
<a name="csSensor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>csSensor</h4>
<pre>private&nbsp;SampleProvider csSensor</pre>
<div class="block">Sample provider of the color sensor used to fetch light sensor's readings.</div>
</li>
</ul>
<a name="csData">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>csData</h4>
<pre>private&nbsp;float[] csData</pre>
<div class="block">Array containing data obtained from light sensor.</div>
</li>
</ul>
<a name="thetaX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>thetaX</h4>
<pre>private&nbsp;double thetaX</pre>
<div class="block">Variable which is the difference of the angles between the positive X axis and negative X axis.</div>
</li>
</ul>
<a name="thetaY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>thetaY</h4>
<pre>private&nbsp;double thetaY</pre>
<div class="block">Variable which is the difference of the angles between the positive Y axis and negative Y axis.</div>
</li>
</ul>
<a name="positionX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>positionX</h4>
<pre>private&nbsp;double positionX</pre>
<div class="block">Variable which is the calculated offset of the robot in X direction.</div>
</li>
</ul>
<a name="positionY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>positionY</h4>
<pre>private&nbsp;double positionY</pre>
<div class="block">Variable which is the calculated offset of the robot in Y direction.</div>
</li>
</ul>
<a name="dT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dT</h4>
<pre>private&nbsp;double dT</pre>
<div class="block">Variable which is the calculated angle offset of the robot.</div>
</li>
</ul>
<a name="correctionStart">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>correctionStart</h4>
<pre>private&nbsp;long correctionStart</pre>
<div class="block">Variables that hold the values of the start and end of sensor polling.</div>
</li>
</ul>
<a name="correctionEnd">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>correctionEnd</h4>
<pre>private&nbsp;long correctionEnd</pre>
<div class="block">Variables that hold the values of the start and end of sensor polling.</div>
</li>
</ul>
<a name="atApproxOrigin">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>atApproxOrigin</h4>
<pre>private&nbsp;boolean atApproxOrigin</pre>
<div class="block">Boolean that indicates if robot is at origin or not.</div>
</li>
</ul>
<a name="lineCounter">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lineCounter</h4>
<pre>private&nbsp;int lineCounter</pre>
<div class="block">Counter that determines number of lines detected.</div>
</li>
</ul>
<a name="saveLineAngles">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveLineAngles</h4>
<pre>private&nbsp;double[] saveLineAngles</pre>
<div class="block">Buffer that stores angles at which lines are detected.</div>
</li>
</ul>
<a name="SENSOR_TO_WHEEL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SENSOR_TO_WHEEL</h4>
<pre>private final&nbsp;double SENSOR_TO_WHEEL</pre>
<div class="block">Distance to move to origin.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#ca.mcgill.ecse211.finalproject.controller.LightLocalization.SENSOR_TO_WHEEL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LOOP_TIME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOOP_TIME</h4>
<pre>private static final&nbsp;long LOOP_TIME</pre>
<div class="block">Period for which sensor reading must be taken.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#ca.mcgill.ecse211.finalproject.controller.LightLocalization.LOOP_TIME">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="leftMotor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>leftMotor</h4>
<pre>private&nbsp;EV3LargeRegulatedMotor leftMotor</pre>
<div class="block">Left and right motor of the robot.</div>
</li>
</ul>
<a name="rightMotor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rightMotor</h4>
<pre>private&nbsp;EV3LargeRegulatedMotor rightMotor</pre>
<div class="block">Left and right motor of the robot.</div>
</li>
</ul>
<a name="zipLineLocalization">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>zipLineLocalization</h4>
<pre>public&nbsp;boolean zipLineLocalization</pre>
<div class="block">Boolean indicating light localization is happening for zipline mounting. <br>
 This boolean is used to communicate between ZiplineTraversal class and LightLocalization class.</div>
</li>
</ul>
<a name="endZipLineLocalization">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>endZipLineLocalization</h4>
<pre>public&nbsp;boolean endZipLineLocalization</pre>
<div class="block">Boolean indicating light localization is happening for zipline dismounting. <br>
 This boolean is used to communicate between ZiplineTraversal class and LightLocalization class.</div>
</li>
</ul>
<a name="localizeOnTheMove">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>localizeOnTheMove</h4>
<pre>public&nbsp;boolean localizeOnTheMove</pre>
<div class="block">Boolean indicating whether the robot is localizing between two destination points. <br>
 This boolean is used to communicate between ZiplineTraversal class and LightLocalization class.</div>
</li>
</ul>
<a name="biggest">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>biggest</h4>
<pre>private&nbsp;double biggest</pre>
<div class="block">Variables which hold the highest and smallest derivative of the light value seen. These variables help the robot
 detect lines while offsets of light not posing a problem.</div>
</li>
</ul>
<a name="smallest">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>smallest</h4>
<pre>private&nbsp;double smallest</pre>
<div class="block">Variables which hold the highest and smallest derivative of the light value seen. These variables help the robot
 detect lines while offsets of light not posing a problem.</div>
</li>
</ul>
<a name="lastBrightness">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastBrightness</h4>
<pre>private&nbsp;float lastBrightness</pre>
<div class="block">Variable which holds the last seen brightness to calculate the differentiation</div>
</li>
</ul>
<a name="currentBrightness">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>currentBrightness</h4>
<pre>private&nbsp;float currentBrightness</pre>
<div class="block">Variable which holds the current brightness to calculate the differentiation</div>
</li>
</ul>
<a name="dbdt">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>dbdt</h4>
<pre>private&nbsp;float dbdt</pre>
<div class="block">Variable which holds the instantaneous differentiation of the brightness d/dt(brightness)</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LightLocalization-ca.mcgill.ecse211.finalproject.controller.Navigation-ca.mcgill.ecse211.finalproject.odometry.Odometer-EV3LargeRegulatedMotor-EV3LargeRegulatedMotor-SampleProvider-float:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LightLocalization</h4>
<pre>public&nbsp;LightLocalization(<a href="../../../../../ca/mcgill/ecse211/finalproject/controller/Navigation.html" title="class in ca.mcgill.ecse211.finalproject.controller">Navigation</a>&nbsp;navigation,
                         <a href="../../../../../ca/mcgill/ecse211/finalproject/odometry/Odometer.html" title="class in ca.mcgill.ecse211.finalproject.odometry">Odometer</a>&nbsp;odo,
                         EV3LargeRegulatedMotor&nbsp;leftMotor,
                         EV3LargeRegulatedMotor&nbsp;rightMotor,
                         SampleProvider&nbsp;csSensor,
                         float[]&nbsp;csData)</pre>
<div class="block">Constructor which links the parameters to the class variables.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="doLocalization--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doLocalization</h4>
<pre>public&nbsp;void&nbsp;doLocalization()</pre>
<div class="block">Main method which localizes the robot through the line detection algorithm that relies on light intensity
 differentiation. The robot goes to the origin if initial localization, and spins until four lines are caught.
 This ensures that the robot does not simply freeze if not all four lines are caught. Finally, the robot
 calculates its offset in position and orientation to update the odometer.</div>
</li>
</ul>
<a name="goToEstimateOrigin--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>goToEstimateOrigin</h4>
<pre>private&nbsp;void&nbsp;goToEstimateOrigin()</pre>
<div class="block">Method that moves robot to origin to commence light localization to ensure the capture of all four lines. If not
 all four lines, the robot has a safeguard as to not get weird numbers.</div>
</li>
</ul>
<a name="checkLines--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkLines</h4>
<pre>private&nbsp;void&nbsp;checkLines()</pre>
<div class="block">Method responsible for robot to rotate and detect lines to be able to calculate the positional offset.</div>
</li>
</ul>
<a name="calculatePosition--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculatePosition</h4>
<pre>private&nbsp;void&nbsp;calculatePosition()</pre>
<div class="block">Method responsible to calculate positional offset of robot from true position.</div>
</li>
</ul>
<a name="lastNValueAdd-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastNValueAdd</h4>
<pre>public&nbsp;void&nbsp;lastNValueAdd(double&nbsp;value)</pre>
<div class="block">So as not to slow down the already slow processor, only the biggest and smallest derivatives are kept in memory.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>value</code> - the derivative of the current light value</dd>
</dl>
</li>
</ul>
<a name="pastline--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pastline</h4>
<pre>public&nbsp;boolean&nbsp;pastline()</pre>
<div class="block">Method responsible for performing line detection algorithm. If the biggest differentiation has passed a certain
 threshold and the smallest as well, then a line has been crossed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>boolean which indicates if a line has been crossed or not</dd>
</dl>
</li>
</ul>
<a name="readLSData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLSData</h4>
<pre>public&nbsp;float&nbsp;readLSData()</pre>
<div class="block">Retrieves intensity read by light sensor. This method also imposes a maximum frequency as to not take up too much
 compuational power and clock cycles.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../ca/mcgill/ecse211/finalproject/sensor/LightController.html#readLSData--">readLSData</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../ca/mcgill/ecse211/finalproject/sensor/LightController.html" title="interface in ca.mcgill.ecse211.finalproject.sensor">LightController</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>light sensor reading</dd>
</dl>
</li>
</ul>
<a name="closestX--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closestX</h4>
<pre>public&nbsp;double&nbsp;closestX()</pre>
<div class="block">This method calculates the closest square side multiple along the X axis to the robot</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>double closest square side multiple along the X axis to the robot</dd>
</dl>
</li>
</ul>
<a name="closestY--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>closestY</h4>
<pre>public&nbsp;double&nbsp;closestY()</pre>
<div class="block">This method calculates the closest square side multiple along the Y axis to the robot</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>double closest square side multiple along the Y axis to the robot</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LightLocalization.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/FallingEdgeUSLocalization.AngleType.html" title="enum in ca.mcgill.ecse211.finalproject.controller"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../ca/mcgill/ecse211/finalproject/controller/Navigation.html" title="class in ca.mcgill.ecse211.finalproject.controller"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?ca/mcgill/ecse211/finalproject/controller/LightLocalization.html" target="_top">Frames</a></li>
<li><a href="LightLocalization.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
